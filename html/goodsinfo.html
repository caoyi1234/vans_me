<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>https://vans.com.cn/passport-login</title>
</head>
<link rel="stylesheet" href="../css/iconfont.css">
<link rel="stylesheet" href="../css/demo.css">
<link rel="stylesheet" href="../css/goodsinfo.css">
<link rel="stylesheet" href="../css/all.css">
<!-- <link rel="stylesheet" href="../css/bootstrap.min.css"> -->
<style>
    @font-face {
        font-family: 'iconfont';
        src: url('iconfont.eot');
        src: url('iconfont.eot?#iefix') format('embedded-opentype'),
            url('iconfont.woff2') format('woff2'),
            url('iconfont.woff') format('woff'),
            url('iconfont.ttf') format('truetype'),
            url('iconfont.svg#iconfont') format('svg');
    }

    .iconfont {
        font-family: "iconfont" !important;
        font-size: 16px;
        font-style: normal;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
    }
</style>

<body>
    <!-- header -->
    <div id="header"></div>
    <!-- section -->
    <section>
        <div class="top">
            <a href="">首页</a>&nbsp;&nbsp;&nbsp;&nbsp;<span>/</span>&nbsp;&nbsp;&nbsp;&nbsp;
            <a href="">中性鞋</a>&nbsp;&nbsp;&nbsp;&nbsp;<span>/</span>
        </div>
        <div class="center">
            <div id="Mirror">
                <img src="" class="Mirror" id="cuImg6">
            </div>
            <div class="img_mirror">
                <div id="big_mirror"><img id="cuImg0" src="">
                    <div id="mask"></div>
                </div>
                <div class="cutImg"><img id="cuImg1" src=""></div>
                <div class="cutImg"><img id="cuImg2" src=""></div>
                <div class="cutImg"><img id="cuImg3" src=""></div>
                <div class="cutImg"><img id="cuImg4" src=""></div>
                <div class="cutImg"><img id="cuImg5" src=""></div>
            </div>
            <div class="centerRight">
                <div class="centerRight1">
                    <h1 id="goodName"></h1>
                    <span>￥<span id="goodPrice"></span></span>
                </div>
                <div class="centerRight2">
                    <h1>选择颜色：白色/黑色</h1>
                    <a href=""><img id="goodImg" src=""></a>
                </div>
                <div class="centerRight3">
                    <h1>选择鞋码：<span id="goodSize"></span></h1>
                    <a class="Asize">35</a>
                    <a class="Asize">36</a>
                    <a class="Asize">36.5</a>
                    <a class="Asize">37</a>
                    <a class="Asize">38</a>
                    <a class="Asize">39</a>
                    <a class="Asize">40</a>
                    <a class="Asize">41</a>
                    <a class="Asize">42</a>
                    <a class="Asize">43</a>
                    <a class="Asize">44</a>
                    <a class="Asize">45</a>
                    <a class="Asize">46</a>
                </div>
                <div class="centerRight4">
                    <p>选购数量：<span id="goodSub">-</span><a href="" id="goodShu">1</a><span id="goodAdd">+</span></p>
                    <span class="kucun">库存<span id="goodNum">100</span>件</span>
                </div>
                <div class="centerRight5">
                    <a id="addGoodsCar">加入购物车</a>
                    <a href="" class="huaguo">立即购买</a>
                    <img src="../img/heart.jpg">
                    <span>收藏该商品</span>
                </div>
                <div class="centerRight6">
                    <div class="SF"><img src="../img/SF.jpg"><span>顺丰包邮</span></div>
                    <div class="day15"><img src="../img/day15.jpg"><span>15天无理由退换货</span></div>
                </div>
            </div>
        </div>
        <div class="down">
            <img class="lastIMG" id="lastImg1" src="">
            <img class="lastIMG" id="lastImg2" src="">
            <img class="lastIMG" id="lastImg3" src="">
            <img class="lastIMG" id="lastImg4" src="">
            <img class="lastIMG" id="lastImg5" src="">
            <!-- <img src=""> -->
            <img src="../img/goodInfo9.jpg">
            <img src="../img/goodInfo10.jpg">
        </div>
        <div class="least">
            <img class="guess" src="../img/guess.jpg">
            <div class="least_top">
                <div class="least_top1">
                    <a href=""><img src="../img/guessLike1.jpg"></a>
                    <a href="">GILBERT CROCKETT 2 PRO 男款板鞋休闲鞋</a>
                    <span>￥635.00</span>
                </div>
                <div class="least_top1">
                    <a href=""><img src="../img/guessLike2.jpg"></a>
                    <a href="">GILBERT CROCKETT 2 PRO 男款板鞋休闲鞋</a>
                    <span>￥635.00</span>
                </div>
                <div class="least_top1">
                    <a href=""><img src="../img/guessLike3.jpg"></a>
                    <a href="">GILBERT CROCKETT 2 PRO 男款板鞋休闲鞋</a>
                    <span>￥635.00</span>
                </div>
                <div class="least_top1">
                    <a href=""><img src="../img/guessLike4.jpg"></a>
                    <a href="">GILBERT CROCKETT 2 PRO 男款板鞋休闲鞋</a>
                    <span>￥635.00</span>
                </div>
            </div>
            <a href="" id="getChange">换一批</a>
        </div>
    </section>
    <!-- footer -->
    <div id="footer"></div>
</body>
</html>
<script src="../js/iconfont.js"></script>
<script src="../js/jquery.min.js"></script>
<script src="../js/cookieTools.js"></script>
<script src="../js/all.js"></script>
<script>
    $("#footer").load("footer.html");
    $("#header").load("header.html");
    $("#addGoodsCar").click(function () {
        let num = $("#goodShu").html();
        let goodsId = getParam();
        let userId = getCookie("userId");
        $.get("../php/addGoods.php", { goodsId: goodsId, userId: userId, num: num },
            function (data) {
                if (data == 1) {
                    alert("添加成功");
                } else {
                    alert("添加失败");
                }
            });
    });
</script>
<script>
    //根据a标签传来的id值改变页面之中的数据
    function getParam() {
        //使用问号来分割字符串；
        C1 = window.location.href.split("?")[1];
        // 使用等号分割得到等号后面的也就是用户名；
        C2 = C1.split("=")[1];
        // alert(C1); alert(C2)
        return C2;
    }
    let goodsId = getParam();
    console.log(goodsId);
    $.get("../php/getGoods.php", { goodsId: goodsId }, function (data) {
        if (data) {
            // alert("准备获取数据");
            console.log(data);
            let t1 = data.split("[");
            console.log(t1);
            let arr = [];
            for (let i = 0; i < t1.length; i++) {
                if (i % 2 == 0) {
                    arr.push(t1[i]);
                }
            }
            // console.log(arr);
            let arr2 = arr.slice(1);
            // console.log(arr2);
            let arr3 = [];
            let arr4 = [];
            for (let i = 0; i < arr2.length; i++) {
                // console.log(arr2[i].split("string"));
                arr3.push(arr2[i].split("string"));
                arr4.push(arr3[i][1]);
            }
            // console.log(arr3);
            // console.log(arr4);
            let arr5 = [];
            let arr6 = [];
            for (let i = 0; i < arr4.length; i++) {
                arr5.push(arr4[i].split('"'));
                arr6.push(arr5[i][1]);
            }
            // console.log(arr5);        
            // console.log(arr6); 
            $("#cuImg0").attr("src", arr6[4]);
            $("#cuImg1").attr("src", arr6[4]);
            $("#cuImg2").attr("src", arr6[5]);
            $("#cuImg3").attr("src", arr6[6]);
            $("#cuImg4").attr("src", arr6[7]);
            $("#cuImg5").attr("src", arr6[8]);
            $("#cuImg6").attr("src", arr6[4]);
            $("#goodImg").attr("src", arr6[4]);
            $("#lastImg1").attr("src", arr6[4]);
            $("#lastImg2").attr("src", arr6[5]);
            $("#lastImg3").attr("src", arr6[6]);
            $("#lastImg4").attr("src", arr6[7]);
            $("#lastImg5").attr("src", arr6[8]);
            $("#goodName").html(arr6[1]);
            $("#goodPrice").html(arr6[2]);
            $("#goodNum").html(arr6[3]);
        }
        if (data == 0) {
            alert("无法获取数据");
        }
    })
</script>
<script>
    window.onload = function () {
        $(".Asize").click(function () {
            $(this).css({
                "color": "white",
                "background": "#c8192e",
            })
            $(this).siblings("a").css({
                "color": "#999999",
                "background": "transparent"
            })
            // let size=$(this).html;
            $("#goodSize").html($(this).html());
        })
        $("#goodSub").click(function () {
            let num = parseInt($("#goodShu").html());
            if (num == 1) {
                return false;
            } else {
                num--;
                $("#goodShu").html(num);
            }
        })
        $("#goodAdd").click(function () {
            let num = parseInt($("#goodShu").html());
            if (num == $("#goodNum").html()) {
                return false;
            } else {
                num++;
                $("#goodShu").html(num);
            }
        })
        let yuanTu = document.getElementById("big_mirror");
        let mirror = document.getElementById("Mirror");
        let Mask = document.getElementById("mask");

        yuanTu.onmouseover = function () {
            mirror.style.display = "block";
            Mask.style.display = "block";
        }
        yuanTu.onmouseout = function () {
            mirror.style.display = "none";
            Mask.style.display = "none";
        }
        let left = 0;
        let top = 0;
        yuanTu.onmousemove = function (e) {
            left = e.clientX - 115 + scrollX;
            top = e.clientY - 330 + scrollY;
            // window.onscroll=function(){
            //     left=e.clientX-115+scrollX;
            // top=e.clientY-330+scrollY;
            // }


            if (left <= 0) {
                left = 0;
            }
            if (left >= 500) {
                left = 500;
            }
            if (top <= 0) {
                top = 0;
            }
            if (top >= 550) {
                top = 550;
            }
            $("#mask").css({ "left": left, "top": top });
            let x = (Mask.offsetLeft) * 2;
            let y = (Mask.offsetTop) * 2;
            $(".Mirror").css("left", -x + "px");
            $(".Mirror").css("top", -y + "px");
        }


        $(".cutImg").mouseover(function () {
            let src = $(this).children("img").attr("src");
            $("#big_mirror").children("img").attr("src", src);
            $(".Mirror").attr("src", src);
            $(this).children("img").css("border", "2px solid #c8192e");
            $(this).siblings(".cutImg").children("img").css("border", "none");
            $(this).css("cursor", "pointer");
        })
    }
</script>